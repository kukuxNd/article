Title: èµ„æºå†—ä½™ç­›æŸ¥å‰”é™¤
Date: 2025-04-28
Category: æ€§èƒ½ä¼˜åŒ–

**æ¸¸æˆèµ„æºå†—ä½™æ£€æµ‹å·¥å…·**ï¼Œæ‰¾å‡ºæ¯”å¦‚â€œ1GBå†—ä½™èµ„æºâ€ï¼Œä¸€èˆ¬æ˜¯è¿™ä¹ˆåšçš„ï¼š

---

### **ä¸€ã€æ•´ä½“æ€è·¯**
1. **æ‰«æèµ„æºåˆ—è¡¨**  
   æŠŠæ‰€æœ‰æ¸¸æˆèµ„æºï¼ˆæ¯”å¦‚Texturesã€Modelsã€Audioã€Shadersç­‰ï¼‰å…¨æ‰«æä¸€éï¼Œç”Ÿæˆèµ„æºç´¢å¼•è¡¨ã€‚

2. **åˆ†æå¼•ç”¨å…³ç³»**  
   æŠŠ**æ¯ä¸ªèµ„æº**çš„**å¼•ç”¨é“¾**æ‹‰å‡ºæ¥ï¼š
   - è°å¼•ç”¨äº†å®ƒï¼Ÿ
   - æ˜¯è¢«Prefabå¼•ç”¨ï¼Œè¿˜æ˜¯åœºæ™¯å¼•ç”¨ï¼Œè¿˜æ˜¯ä»£ç åŠ¨æ€åŠ è½½ï¼Ÿ

3. **å®šä½å­¤ç«‹èµ„æºï¼ˆæœªè¢«å¼•ç”¨ï¼‰**
   - **å®Œå…¨æ²¡è¢«ä»»ä½•åœºæ™¯/Prefab/ä»£ç å¼•ç”¨çš„èµ„æº**ï¼Œåˆæ­¥åˆ¤ä¸º**å†—ä½™**ã€‚
   - å¦‚æœæ²¡æœ‰å¼•ç”¨ï¼Œå°±å¯èƒ½æ˜¯åƒåœ¾/å†å²æ®‹ç•™/è¯¯æ”¾çš„ä¸œè¥¿ã€‚

4. **ç‰¹ä¾‹åˆ†æ**
   - æœ‰äº›èµ„æºæ˜¯**åŠ¨æ€åŠ è½½**ï¼ˆæ¯”å¦‚AssetBundleï¼‰ï¼Œéœ€è¦é€šè¿‡ä»£ç æ‰«æè¡¥å……å¼•ç”¨ã€‚
   - æœ‰äº›æ˜¯Editor Onlyèµ„æºï¼Œåªåœ¨ç¼–è¾‘å™¨é‡Œç”¨ï¼Œä¹Ÿè¦æ’é™¤ã€‚

5. **ç»Ÿè®¡ä½“ç§¯**
   - æŠŠæ‰€æœ‰æ€€ç–‘æ˜¯å†—ä½™çš„èµ„æºåŠ èµ·æ¥ï¼Œç»Ÿè®¡å¤§å°ï¼Œæ¯”å¦‚1GBã€‚

6. **äººå·¥ç¡®è®¤æˆ–è§„åˆ™ç­›é€‰**
   - æœ‰äº›è¯¯åˆ¤ï¼ˆæ¯”å¦‚èµ„æºé¢„å¤‡äº†ä½†æœªæ¥è¦ç”¨ï¼‰ï¼Œå¯ä»¥åŠ ç™½åå•ã€‚
   - æ”¯æŒä¸€é”®å¯¼å‡ºæˆåˆ—è¡¨æˆ–æ‰“åŒ…å‹ç¼©åŒ…ï¼Œç»™ç­–åˆ’/ç¾æœ¯å¤æ ¸ã€‚

---

### **äºŒã€åˆ¤æ–­èµ„æºæ˜¯å¦å†—ä½™çš„æ ‡å‡†**
ä¸»è¦é ä¸‹é¢è¿™å‡ æ¡ï¼š

| åˆ¤æ–­ç‚¹ | è¯´æ˜ |
|:----|:----|
| æ˜¯å¦åœ¨åœºæ™¯é‡Œå¼•ç”¨ | åœºæ™¯ä¾èµ–æ£€æŸ¥ï¼šå¼•ç”¨å°±ä¸æ˜¯å†—ä½™ |
| æ˜¯å¦è¢«Prefabå¼•ç”¨ | Prefabå¼•ç”¨æ£€æŸ¥ï¼šå¼•ç”¨å°±ä¸æ˜¯å†—ä½™ |
| æ˜¯å¦è¢«Scriptä»£ç å¼•ç”¨ | åŠ¨æ€åŠ è½½åˆ†æï¼ˆå¦‚Resources.Loadã€Addressableç­‰ï¼‰ |
| æ˜¯å¦æ‰“åŒ…åˆ°AssetBundle | ABæ‰“åŒ…é…ç½®æ£€æŸ¥ï¼Œå·²æ‰“åŒ…çš„ä¸ç®—å†—ä½™ |
| æ˜¯å¦åœ¨Editor Onlyç›®å½• | `Editor/`ç›®å½•é‡Œçš„æœ¬æ¥å°±ä¸ä¼šè¿›æ­£å¼åŒ… |
| ç™½åå• | äººå·¥æ ‡è®°çš„æ°¸è¿œä¿ç•™èµ„æº |

---

### **ä¸‰ã€å®é™…æŠ€æœ¯åšæ³•**
ä¸åŒå¼•æ“ç¨æœ‰ä¸åŒï¼Œä½†åŸºæœ¬å¥—è·¯ä¸€è‡´ï¼Œæ¯”å¦‚ï¼š

#### **Unityï¼š**
- æ‰«æ `Assets/` ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ã€‚
- ç”¨ `AssetDatabase.GetDependencies()` æŸ¥å‡ºèµ„æºå¼•ç”¨å…³ç³»ã€‚
- åˆ†ææ‰€æœ‰åœºæ™¯(`.unity`)ã€Prefab(`.prefab`)ã€è„šæœ¬(`.cs`)çš„ç›´æ¥å’Œé—´æ¥å¼•ç”¨ã€‚
- ç»“åˆæ‰“åŒ…é…ç½®ï¼ˆå¦‚Addressables Profileã€Resourcesæ–‡ä»¶å¤¹ï¼‰å†è¿‡æ»¤ä¸€éã€‚
- æœªè¢«å¼•ç”¨çš„ï¼Œè¾“å‡ºåˆ—è¡¨ï¼ˆèµ„æºè·¯å¾„ã€å¤§å°ã€ç±»å‹ç­‰ï¼‰ã€‚

> ç”šè‡³è¿˜èƒ½æ ¹æ®`.meta`æ–‡ä»¶é‡Œçš„GUIDåå‘æ‰¾å¼•ç”¨å…³ç³»ã€‚

#### **Unreal Engine (UE4/UE5)ï¼š**
- ç”¨`Reference Viewer`ï¼ˆå¼•ç”¨æŸ¥çœ‹å™¨ï¼‰æ‹‰å–èµ„æºå¼•ç”¨å›¾ã€‚
- å†™è„šæœ¬ï¼ˆæ¯”å¦‚Python for Unrealï¼‰æ‰¹é‡æ£€æµ‹èµ„æºçš„å¼•ç”¨æ•°ã€‚
- æ²¡æœ‰è¢«å…³å¡å¼•ç”¨ã€æ²¡æœ‰è¢«è“å›¾å¼•ç”¨çš„èµ„æºï¼Œå¯èƒ½æ˜¯å†—ä½™çš„ã€‚

---

### **å››ã€æ³¨æ„å‘ç‚¹**
- åŠ¨æ€èµ„æºåŠ è½½ï¼ˆAddressable/Resources.Loadï¼‰éœ€è¦ä»£ç å±‚æ‰«æã€‚
- æ‰“åŒ…è§„åˆ™ï¼ˆä¸åŒå¹³å°å¯èƒ½æ‰“åŒ…ä¸åŒï¼‰è¦åŒæ­¥ã€‚
- ç‰¹æ®Šèµ„æºï¼ˆéŸ³æ•ˆã€ç²’å­ç‰¹æ•ˆå°çº¹ç†ï¼‰æœ‰å¯èƒ½æ˜¯é—´æ¥ç”¨åˆ°ï¼Œä¸èƒ½ç®€å•ä¸¢ã€‚
- æœªæ¥ç‰ˆæœ¬é¢„ç•™çš„èµ„æºè¦æ…é‡å¤„ç†ã€‚

---

### **äº”ã€ç¤ºä¾‹**
æ¯”å¦‚ Unity é¡¹ç›®é‡Œï¼Œæ£€æµ‹å‡ºå¦‚ä¸‹å†—ä½™èµ„æºï¼š

| è·¯å¾„ | ç±»å‹ | å¤§å° |
|:----|:----|:----|
| Assets/Textures/old_logo.png | Texture2D | 3MB |
| Assets/Models/test_enemy_01.fbx | Model | 6MB |
| Assets/Sounds/old_bgm.wav | AudioClip | 10MB |

åˆè®¡ï¼š19MBï¼Œç´¯ç§¯ç±»ä¼¼çš„ï¼Œå°±èƒ½è½»æ¾æ‰¾åˆ°**1GBç”šè‡³æ›´å¤šå†—ä½™èµ„æº**ã€‚

---

### **å…­ã€ä¸€äº›å¸¸ç”¨å·¥å…·**
- **Unity**ï¼šAddressable Analyzeã€Resource Checkeræ’ä»¶ã€è‡ªå†™Editorå·¥å…·
- **UE4/5**ï¼šReference Viewer + Pythonè„šæœ¬æ‰«æ
- **é€šç”¨**ï¼šè‡ªå†™éå†å·¥å…·ï¼ˆç”¨Pythonã€C#ã€C++ï¼Œèµ°å¼•æ“APIï¼‰

---

å¥½çš„ï¼æ¥ï¼Œå’±ä»¬ç›´æ¥ä¸Š**èƒ½è·‘çš„ç‰ˆæœ¬**ï¼Œä¸€ä¸ª**ç®€æ˜“ç‰ˆUnityèµ„æºå†—ä½™æ£€æµ‹å™¨**ã€‚

ç›®æ ‡å°±æ˜¯ï¼š  
- æ‰«æ `Assets/` ç›®å½•  
- æ‰¾å‡º**å®Œå…¨æ²¡äººå¼•ç”¨çš„èµ„æº**ï¼ˆåœºæ™¯/Prefab/è„šæœ¬/Addressableséƒ½æ²¡ç”¨åˆ°çš„ï¼‰
- è¾“å‡ºæˆä¸€ä¸ªåˆ—è¡¨

---

# ğŸ“¦ Unityèµ„æºå†—ä½™æ£€æµ‹å™¨ ç®€æ˜“ç‰ˆ

```csharp
using UnityEditor;
using UnityEngine;
using System.Collections.Generic;
using System.IO;

public class SimpleRedundancyChecker
{
    [MenuItem("Tools/Check Redundant Assets")]
    public static void CheckRedundantAssets()
    {
        // ç¬¬ä¸€æ­¥ï¼šæ”¶é›†æ‰€æœ‰èµ„æºè·¯å¾„
        string[] allAssets = AssetDatabase.GetAllAssetPaths();
        List<string> assetCandidates = new List<string>();

        foreach (string path in allAssets)
        {
            if (IsValidAsset(path))
            {
                assetCandidates.Add(path);
            }
        }

        // ç¬¬äºŒæ­¥ï¼šéå†æ‰€æœ‰åœºæ™¯å’ŒPrefabå¼•ç”¨
        HashSet<string> referencedAssets = new HashSet<string>();

        // éå†æ‰€æœ‰åœºæ™¯
        string[] sceneGuids = AssetDatabase.FindAssets("t:Scene");
        foreach (var guid in sceneGuids)
        {
            string scenePath = AssetDatabase.GUIDToAssetPath(guid);
            string[] deps = AssetDatabase.GetDependencies(scenePath, true);
            foreach (var dep in deps)
            {
                referencedAssets.Add(dep);
            }
        }

        // éå†æ‰€æœ‰Prefab
        string[] prefabGuids = AssetDatabase.FindAssets("t:Prefab");
        foreach (var guid in prefabGuids)
        {
            string prefabPath = AssetDatabase.GUIDToAssetPath(guid);
            string[] deps = AssetDatabase.GetDependencies(prefabPath, true);
            foreach (var dep in deps)
            {
                referencedAssets.Add(dep);
            }
        }

        // ç¬¬ä¸‰æ­¥ï¼šæ¯”å¯¹ï¼Œæ‰¾å‡ºæœªè¢«å¼•ç”¨çš„èµ„æº
        List<string> redundantAssets = new List<string>();

        foreach (var asset in assetCandidates)
        {
            if (!referencedAssets.Contains(asset))
            {
                redundantAssets.Add(asset);
            }
        }

        // ç¬¬å››æ­¥ï¼šè¾“å‡ºç»“æœ
        Debug.Log($"æ‰¾åˆ° {redundantAssets.Count} ä¸ªå¯èƒ½çš„å†—ä½™èµ„æº:");
        foreach (var path in redundantAssets)
        {
            Debug.Log(path);
        }

        // å¯é€‰ï¼šå¯¼å‡ºåˆ°æ–‡æœ¬
        string outputPath = "Assets/redundant_assets_list.txt";
        File.WriteAllLines(outputPath, redundantAssets);
        AssetDatabase.Refresh();
        Debug.Log($"å†—ä½™èµ„æºåˆ—è¡¨å¯¼å‡ºåˆ°ï¼š{outputPath}");
    }

    static bool IsValidAsset(string path)
    {
        // æ’é™¤æ— å…³æ–‡ä»¶
        if (!path.StartsWith("Assets/"))
            return false;
        if (path.EndsWith(".cs") || path.EndsWith(".shader") || path.Contains("/Editor/"))
            return false;
        return true;
    }
}
```

---

# ğŸ§  ç®€å•è§£é‡Šä¸€ä¸‹è¿™ä¸ªè„šæœ¬æ€ä¹ˆè·‘çš„

1. **æ‰«ææ‰€æœ‰èµ„æº**ï¼šæ¯”å¦‚Texturesã€Modelsã€Audioç­‰
2. **æ‰«ææ‰€æœ‰åœºæ™¯ã€Prefabå¼•ç”¨**ï¼šç”¨ `AssetDatabase.GetDependencies`
3. **æ¯”å¯¹å¼•ç”¨å…³ç³»**ï¼šå“ªäº›èµ„æºæ²¡æœ‰å‡ºç°åœ¨ä»»ä½•å¼•ç”¨é‡Œ
4. **å¯¼å‡ºtxtåˆ—è¡¨**ï¼šæ¸…æ¸…æ¥šæ¥šå‘Šè¯‰ä½ ï¼šå“ªäº›æ˜¯å†—ä½™çš„

---

# ğŸ“ˆ ä½¿ç”¨æ–¹æ³•
1. æŠŠä¸Šé¢è¿™æ®µä»£ç æ”¾åˆ°ä½ çš„Unityå·¥ç¨‹ `Assets/Editor/` æ–‡ä»¶å¤¹é‡Œã€‚
2. Unityèœå•æ  â†’ `Tools` â†’ `Check Redundant Assets`
3. æ‰«å®Œååœ¨`Console`é‡Œä¼šçœ‹åˆ°ç»“æœï¼Œè¿˜ä¼šç”Ÿæˆä¸€ä¸ªï¼š  
   ğŸ‘‰ `Assets/redundant_assets_list.txt`  
4. ç„¶åå°±å¯ä»¥äººå·¥å¤æ ¸æˆ–è€…æ‰¹é‡å¤„ç†äº†ï¼ˆæ¯”å¦‚æ‰¹é‡åˆ é™¤ï¼‰ã€‚

---

# âš¡ æ³¨æ„
- å®ƒ**ä¸æ‰«æä»£ç ä¸­åŠ¨æ€åŠ è½½ï¼ˆæ¯”å¦‚`Resources.Load`ï¼‰çš„å¼•ç”¨**ï¼Œæ‰€ä»¥æœ‰äº›åŠ¨æ€èµ„æºä¼šè¯¯åˆ¤æˆå†—ä½™ï¼Œéœ€è¦ä½ åŠ ç™½åå•æœºåˆ¶ã€‚
- å®ƒ**ä¸åˆ†æAddressablesèµ„æº**ï¼Œå¦‚æœä½ ç”¨äº†Addressablesï¼Œéœ€è¦å•ç‹¬å¤„ç†Addressableç³»ç»Ÿçš„å¼•ç”¨å…³ç³»ã€‚
- è¿™æ˜¯**è½»é‡ç‰ˆ**ï¼Œé€‚åˆå°ä¸­å‹é¡¹ç›®å¿«é€ŸæŸ¥ä¸€æ³¢ã€‚

---

# ğŸ¯ å¦‚æœè¦å‡çº§
- å¢åŠ  **åŠ¨æ€å¼•ç”¨æ‰«æ**ï¼ˆæ¯”å¦‚åˆ†æ `.cs` æ–‡ä»¶é‡Œçš„ `Resources.Load`ã€Addressables APIï¼‰
- åŠ  **ç™½åå•**ï¼ˆæ¯”å¦‚ `Assets/Resources/` ä¸‹é¢ä¸åšå†—ä½™æ£€æµ‹ï¼‰
- åŠ  **ç±»å‹ç­›é€‰**ï¼ˆæ¯”å¦‚åªæ£€æµ‹å›¾ç‰‡æˆ–æ¨¡å‹ï¼‰
- åŠ  **è‡ªåŠ¨åˆ é™¤åŠŸèƒ½**ï¼ˆæ£€æµ‹å®Œè‡ªåŠ¨ä¸€é”®æ¸…é™¤ï¼‰

---

